# c++沉思录
## chapter 4 类设计者的核查表
### 类需要一个构造函数吗？
**类需要一个构造函数吗？** 有些类太简单，它们的结构就是它们的接口，所以不需要构造函数。但复杂的类则需要构造函数来隐藏它们的内部工作方式。
### 数据成员是私有的吗？
**数据成员是私有的吗？** 通常使用使用公有的数据成员不是什么好事，因为类设计者无法控制何时访问这些成员。例如，下面一个支持可变长矢量类：
```c
template<typename T> class Vector
{
public: 
  int length;
};
```
如果类设计者将矢量的长度当作一个成员变量，那么设计者就必须保证这个成员变量在任何时候都能够正确反应实际矢量的长度，因为没有办法知道类的使用者什么时候会来访问这个信息。如果长度在函数中是像这样实现的：
```c
template<typename T> class Vector
{
public: 
  int length() const;
};
```
那么除非用户调用函数 length，否则类 Vecotr 都不必计算长度。

### 类需要一个无参的构造函数吗？
如果一个类已经有了构造函数，而想声明该类的对象可以不必显式地初始化它们，则必须显示地写一个无参构造函数。例如:
```c
class Point
{
public:
  Point(int p, int q): x(p), y(q) {}
private:
  int x, y;
};
```
这里定义了一个有一个构造函数的类。除非这个类有一个不需要参数的构造函数，否则下面的语句就是非法的：
Point p;  //错误：没有初始化

如果一个类需要一个显式构造函数，如上面的 Point 类一般，则试图生成该类对象的数组是非法的：
Point pa[100]; // 错误
即使想要把类的所有实例都初始化，也应该考虑所付出的代价，是否值得为此禁用数组对象。

### 是不是每个构造函数初始化了所有的数据成员？
构造函数的用途就是用一种明确定义的状态来设置对象。对象的状态由对象的数据成员进行反映。因此，每个构造函数都要负责为所有的数据成员设置经过明确定义的值。当然，有时，类会有一些数据成员，它们只在它们的对象存在了一定时间之后才有意义。所以要多思考。

### 类需要析构函数吗？
并非所有有构造函数的类都需要有析构函数。如果深入思考一个类要做些什么，那么类是否需要析构函数的问题就十分明显了。应该想一想该类是否分配了资源，而这些资源又不会由成员函数自动释放。特别是那些构造函数里包含了 new 表达式的类，通常要在析构函数中加上相应的 delete 表达式，所以会需要一个析构函数。

### 类需要一个虚析构函数吗？
有些类需要虚析构函数只是为了声明它们的析构函数是虚的。当然，决不会用作基类的类是不需要虚析构函数的：任何虚函数只在继承的