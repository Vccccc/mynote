# pcasm-book
## Introduction
### 1.2.2 The CPU
时钟脉冲：脉冲信号是一个按一定电压幅度，一定时间间隔连续发出。脉冲信号之间的时间间隔称为周期；而将在单位时间（如1秒）内所产生的脉冲个数称为频率。

频率为1.5GHz的CPU每秒产生1500000000次脉冲，也称每次脉冲为一个周期。

一个指令需要多少周期依赖于CPU的模式。

#### 寄存器
16位寄存器 | 说明
:----|:----
AX | AX可拆分为AH,AL
BX | BX可拆分为BH,BL
CX | CX可拆分为CH,CL
DX | DX可拆分为DH,DL
SI | 不可拆分
DI | 不可拆分
BP | 
SP |
CS | Code Segment
DS | Data Segment
SS | Stack Segment
ES | Extra Segment
IP | Instruction Pointer

32位寄存器(E:extend) | 说明
:----|:----
EAX | EAX可拆分为EAH,EAL
EBX | EBX可拆分为EBH,EBL
ECX | ECX可拆分为ECH,ECL
EDX | EDX可拆分为EDH,EDL

#### 指令操作数
机器代码指令拥有个数和类型不同的操作数； 然而， 通常每个指令有几
个固定的操作数(0到3个)。 操作数可以有下面的类型：
- 寄存器：这些操作数直接指向CPU寄存器里的内容
- 内存：这些操作数指向内存里的数据。 数据的地址可能是硬编码到指令里
的常量或可能直接使用寄存器的值计算得到。 距离段的起始地址的偏
移值即为此地址
- 立即数：这些操作数是指令本身列出的固定的值。 它们储存在指令本身(在
代码段)， 而不在数据段
- 暗指的操作数：这些操作数没有明确显示。 例如： 往寄存器或内存增加1的加法指令。 1是暗指的

#### 基本指令
最基本的指令是 MOV 指令。它将数据从一个地方移到另一个地方(像高级语
言里面的赋值操作一样)。 它携带两个操作数：
```
mov dest (目的操作数), src(源操作数)
```
src指定的数据拷贝到了dest。一个指令的两个操作数不能同时是内存操作
数。 这就指出了一个汇编古怪的地方。 通常， 对于各种各样指令的使用都
有某些强制性的规定。 操作数必须是同样的大小。 AX 里的值就不能储存
到 BL 里去。

这儿有一个例子(分号表示注释的开始)：
```
mov eax, 3 ; 将3存入 EAX 寄存器(3是一个立即数)。
mov bx, ax ; 将AX的值存入到BX寄存器。
add eax, 4 ; eax = eax + 4
add al, ah ; al = al + ah
sub bx, 10 ; bx = bx - 10
sub ebx, edi ; ebx = ebx - edi

;INC 和DEC 指令将值加1或减1。 因为1是一个暗指的操作数， INC 和DEC的
机器代码比等价的ADD和SUB指令要少。
inc ecx ; ecx++
dec dl ; dl--
```

#### 指示符
指示符是由汇编程序产生的而不是由CPU产生。 它们通常用来要么指示
汇编程序做什么要么提示汇编程序什么。 它们并不翻译成机器代码。 指示
符普遍的应用有：
- 定义常量
- 定义用来储存数据的内存
- 将内存组合成段
- 有条件地包含源代码
- 包含其他文件

NASM 代码像 C 一样要通过一个预处理程序。 它拥有许多和 C 一样的预
处理程序。 但是， NASM 的预处理的指示符以 % 开头而不是像 C 一样以 #开
头。

